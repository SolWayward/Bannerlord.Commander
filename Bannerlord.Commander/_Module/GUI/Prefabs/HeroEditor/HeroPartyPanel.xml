<Prefab>
  <Window>
    <BrushWidget Id="HeroPartyPanel" DataSource="{HeroParty}"
      WidthSizePolicy="StretchToParent"
      HeightSizePolicy="Fixed"
      SuggestedHeight="80"
      Brush="HeroEditor.Input.Background">
      <Children>
        <BrushWidget Id="PartyTopBorder" WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed"
          SuggestedHeight="2" VerticalAlignment="Top"
          Brush="HeroEditor.Section.Border" />
        <BrushWidget Id="PartyBottomBorder" WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed"
          SuggestedHeight="2" VerticalAlignment="Bottom"
          Brush="HeroEditor.Section.Border" />
        <BrushWidget Id="PartyLeftBorder" WidthSizePolicy="Fixed" HeightSizePolicy="StretchToParent"
          SuggestedWidth="2" HorizontalAlignment="Left"
          Brush="HeroEditor.Section.Border" />
        <BrushWidget Id="PartyRightBorder" WidthSizePolicy="Fixed" HeightSizePolicy="StretchToParent"
          SuggestedWidth="2" HorizontalAlignment="Right"
          Brush="HeroEditor.Section.Border" />
        
        <ListPanel Id="PartyContent" WidthSizePolicy="StretchToParent"
          HeightSizePolicy="StretchToParent"
          MarginTop="4"
          MarginBottom="4"
          MarginLeft="4"
          MarginRight="4"
          StackLayout.LayoutMethod="VerticalBottomToTop">
          <Children>
            <TextWidget Id="PartyStatusText" WidthSizePolicy="StretchToParent"
              HeightSizePolicy="Fixed"
              SuggestedHeight="18"
              MarginBottom="4"
              Brush="Clan.TabControl.Text"
              Brush.FontSize="15"
              Brush.TextHorizontalAlignment="Center"
              Text="@PartyStatusText" />
            
            <!-- Top row: Disband + Assign Party -->
            <ListPanel Id="PartyButtonsRow" WidthSizePolicy="StretchToParent"
              HeightSizePolicy="Fixed"
              SuggestedHeight="24"
              MarginBottom="2"
              StackLayout.LayoutMethod="HorizontalLeftToRight">
              <Children>
                <ButtonWidget Id="DisbandPartyButton" DoNotPassEventsToChildren="true"
                  UpdateChildrenStates="true"
                  WidthSizePolicy="StretchToParent"
                  HeightSizePolicy="StretchToParent"
                  MarginRight="2"
                  Command.Click="ExecuteDisbandParty"
                  IsEnabled="@CanDisbandParty">
                  <Children>
                    <BrushWidget Id="DisbandBg" WidthSizePolicy="StretchToParent"
                      HeightSizePolicy="StretchToParent"
                      Brush="HeroEditor.Button.Standard" />
                    <TextWidget Id="DisbandText" WidthSizePolicy="StretchToParent"
                      HeightSizePolicy="StretchToParent"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      Brush="Clan.TabControl.Text"
                      Brush.FontSize="15"
                      Text="Disband" />
                  </Children>
                </ButtonWidget>

                <ButtonWidget Id="AssignPartyButton" DoNotPassEventsToChildren="true"
                  UpdateChildrenStates="true"
                  WidthSizePolicy="StretchToParent"
                  HeightSizePolicy="StretchToParent"
                  MarginLeft="2"
                  Command.Click="ExecuteAddHeroToParty">
                  <Children>
                    <BrushWidget Id="AssignBg" WidthSizePolicy="StretchToParent"
                      HeightSizePolicy="StretchToParent"
                      Brush="HeroEditor.Button.Standard" />
                    <TextWidget Id="AssignText" WidthSizePolicy="StretchToParent"
                      HeightSizePolicy="StretchToParent"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      Brush="Clan.TabControl.Text"
                      Brush.FontSize="15"
                      Text="Assign Party" />
                  </Children>
                </ButtonWidget>
              </Children>
            </ListPanel>
            
            <!-- Bottom row: Edit Party / Create Party (dynamic text) -->
            <ButtonWidget Id="EditPartyButton" DoNotPassEventsToChildren="true"
              UpdateChildrenStates="true"
              WidthSizePolicy="StretchToParent"
              HeightSizePolicy="Fixed"
              SuggestedHeight="24"
              Command.Click="ExecuteEditOrCreateParty">
              <Children>
                <BrushWidget Id="EditPartyBg" WidthSizePolicy="StretchToParent"
                  HeightSizePolicy="StretchToParent"
                  Brush="HeroEditor.Button.Standard" />
                <TextWidget Id="EditPartyText" WidthSizePolicy="StretchToParent"
                  HeightSizePolicy="StretchToParent"
                  HorizontalAlignment="Center"
                  VerticalAlignment="Center"
                  Brush="Clan.TabControl.Text"
                  Brush.FontSize="15"
                  Text="@EditPartyButtonText" />
              </Children>
            </ButtonWidget>
          </Children>
        </ListPanel>
      </Children>
    </BrushWidget>
  </Window>
</Prefab>
