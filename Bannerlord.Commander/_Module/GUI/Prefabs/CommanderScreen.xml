<Prefab>
  <Window>
    <Widget Id="RootContainer" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent"
      Sprite="BlankWhiteSquare_9" Color="#1a1a1aEE">
      <Children>

        <!-- Header Bar -->
        <Widget Id="HeaderBar" WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed"
          SuggestedHeight="60"
          VerticalAlignment="Top" Sprite="BlankWhiteSquare_9" Color="#2a2a2aFF">
          <Children>
            <Widget Id="HeaderTopBorder" WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed"
              SuggestedHeight="2"
              VerticalAlignment="Top" Sprite="BlankWhiteSquare_9" Color="#8B7355FF" />
            <RichTextWidget Id="TitleText" WidthSizePolicy="StretchToParent"
              HeightSizePolicy="StretchToParent"
              HorizontalAlignment="Center" VerticalAlignment="Center"
              Brush="TownManagement.Description.Title.Text" Brush.FontSize="28"
              Brush.TextHorizontalAlignment="Center" Text="@TitleText" />
            <Widget Id="FilterContainer" WidthSizePolicy="CoverChildren" HeightSizePolicy="Fixed"
              SuggestedHeight="28"
              HorizontalAlignment="Right" VerticalAlignment="Center" MarginRight="70">
              <Children>
                <TextWidget Id="FilterLabel" WidthSizePolicy="CoverChildren"
                  HeightSizePolicy="StretchToParent"
                  Brush="Clan.TabControl.Text" Brush.FontSize="16" Text="Filter" MarginRight="8" />
                <Widget Id="FilterInputContainer" WidthSizePolicy="Fixed"
                  HeightSizePolicy="StretchToParent" SuggestedWidth="250"
                  MarginLeft="45" Sprite="BlankWhiteSquare_9" Color="#1a1a1aFF">
                  <Children>
                    <Widget Id="FilterTopBorder" WidthSizePolicy="StretchToParent"
                      HeightSizePolicy="Fixed" SuggestedHeight="2"
                      VerticalAlignment="Top" Sprite="BlankWhiteSquare_9" Color="#8B7355FF" />
                    <Widget Id="FilterBottomBorder" WidthSizePolicy="StretchToParent"
                      HeightSizePolicy="Fixed" SuggestedHeight="2"
                      VerticalAlignment="Bottom" Sprite="BlankWhiteSquare_9" Color="#8B7355FF" />
                    <Widget Id="FilterLeftBorder" WidthSizePolicy="Fixed"
                      HeightSizePolicy="StretchToParent" SuggestedWidth="2"
                      HorizontalAlignment="Left" Sprite="BlankWhiteSquare_9" Color="#8B7355FF" />
                    <Widget Id="FilterRightBorder" WidthSizePolicy="Fixed"
                      HeightSizePolicy="StretchToParent" SuggestedWidth="2"
                      HorizontalAlignment="Right" Sprite="BlankWhiteSquare_9" Color="#8B7355FF" />
                    <EditableTextWidget Id="SearchInputWidget" WidthSizePolicy="StretchToParent"
                      HeightSizePolicy="StretchToParent" MarginLeft="6" MarginRight="6"
                      Brush="Clan.TabControl.Text" Brush.FontSize="14" Text="@FilterText" />
                  </Children>
                </Widget>
              </Children>
            </Widget>
            <Widget Id="HeaderBottomBorder" WidthSizePolicy="StretchToParent"
              HeightSizePolicy="Fixed" SuggestedHeight="2"
              VerticalAlignment="Bottom" Sprite="BlankWhiteSquare_9" Color="#8B7355FF" />
          </Children>
        </Widget>

        <!-- Mode Toggle Tabs -->
        <Widget Id="ModeTabsBar" WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed"
          SuggestedHeight="42"
          MarginTop="60" Sprite="BlankWhiteSquare_9" Color="#1E1E1EFF">
          <Children>
            <ListPanel Id="ModeTabsList" WidthSizePolicy="CoverChildren"
              HeightSizePolicy="StretchToParent"
              HorizontalAlignment="Center" VerticalAlignment="Bottom"
              LayoutImp.LayoutMethod="HorizontalLeftToRight">
              <Children>
                <ButtonWidget Id="KingdomsTabButton" DoNotPassEventsToChildren="true"
                  UpdateChildrenStates="true"
                  WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="180"
                  SuggestedHeight="40"
                  MarginLeft="2" MarginRight="2" Brush="Commander.Tab.Button"
                  Command.Click="ExecuteSelectKingdoms" IsSelected="@IsKingdomsSelected">
                  <Children>
                    <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent"
                      Brush="Clan.TabControl.Text" Text="Kingdoms"
                      HorizontalAlignment="Center" VerticalAlignment="Center" />
                  </Children>
                </ButtonWidget>
                <ButtonWidget Id="ClansTabButton" DoNotPassEventsToChildren="true"
                  UpdateChildrenStates="true"
                  WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="180"
                  SuggestedHeight="40"
                  MarginLeft="2" MarginRight="2" Brush="Commander.Tab.Button"
                  Command.Click="ExecuteSelectClans" IsSelected="@IsClansSelected">
                  <Children>
                    <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent"
                      Brush="Clan.TabControl.Text" Text="Clans"
                      HorizontalAlignment="Center" VerticalAlignment="Center" />
                  </Children>
                </ButtonWidget>
                <ButtonWidget Id="HeroesTabButton" DoNotPassEventsToChildren="true"
                  UpdateChildrenStates="true"
                  WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="180"
                  SuggestedHeight="40"
                  MarginLeft="2" MarginRight="2" Brush="Commander.Tab.Button"
                  Command.Click="ExecuteSelectHeroes" IsSelected="@IsHeroesSelected">
                  <Children>
                    <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent"
                      Brush="Clan.TabControl.Text" Text="Heroes"
                      HorizontalAlignment="Center" VerticalAlignment="Center" />
                  </Children>
                </ButtonWidget>
                <ButtonWidget Id="SettlementsTabButton" DoNotPassEventsToChildren="true"
                  UpdateChildrenStates="true"
                  WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="180"
                  SuggestedHeight="40"
                  MarginLeft="2" MarginRight="2" Brush="Commander.Tab.Button"
                  Command.Click="ExecuteSelectSettlements" IsSelected="@IsSettlementsSelected">
                  <Children>
                    <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent"
                      Brush="Clan.TabControl.Text" Text="Settlements"
                      HorizontalAlignment="Center" VerticalAlignment="Center" />
                  </Children>
                </ButtonWidget>
                <ButtonWidget Id="TroopsTabButton" DoNotPassEventsToChildren="true"
                  UpdateChildrenStates="true"
                  WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="180"
                  SuggestedHeight="40"
                  MarginLeft="2" MarginRight="2" Brush="Commander.Tab.Button"
                  Command.Click="ExecuteSelectTroops" IsSelected="@IsTroopsSelected">
                  <Children>
                    <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent"
                      Brush="Clan.TabControl.Text" Text="Troops"
                      HorizontalAlignment="Center" VerticalAlignment="Center" />
                  </Children>
                </ButtonWidget>
                <ButtonWidget Id="ItemsTabButton" DoNotPassEventsToChildren="true"
                  UpdateChildrenStates="true"
                  WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="180"
                  SuggestedHeight="40"
                  MarginLeft="2" MarginRight="2" Brush="Commander.Tab.Button"
                  Command.Click="ExecuteSelectItems" IsSelected="@IsItemsSelected">
                  <Children>
                    <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent"
                      Brush="Clan.TabControl.Text" Text="Items"
                      HorizontalAlignment="Center" VerticalAlignment="Center" />
                  </Children>
                </ButtonWidget>
                <ButtonWidget Id="CharactersTabButton" DoNotPassEventsToChildren="true"
                  UpdateChildrenStates="true"
                  WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="180"
                  SuggestedHeight="40"
                  MarginLeft="2" MarginRight="2" Brush="Commander.Tab.Button"
                  Command.Click="ExecuteSelectCharacters" IsSelected="@IsCharactersSelected">
                  <Children>
                    <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent"
                      Brush="Clan.TabControl.Text" Text="Characters"
                      HorizontalAlignment="Center" VerticalAlignment="Center" />
                  </Children>
                </ButtonWidget>
              </Children>
            </ListPanel>
            <Widget Id="ModeTabsBottomBorder" WidthSizePolicy="StretchToParent"
              HeightSizePolicy="Fixed" SuggestedHeight="2"
              VerticalAlignment="Bottom" Sprite="BlankWhiteSquare_9" Color="#3D3D3DFF" />
          </Children>
        </Widget>

        <!-- Main Content Area -->
        <Widget Id="MainContentArea" WidthSizePolicy="StretchToParent"
          HeightSizePolicy="StretchToParent"
          MarginTop="104" MarginBottom="60" MarginLeft="20" MarginRight="20">
          <Children>

            <!-- HEROES MODE -->
            <Widget Id="HeroesMode" WidthSizePolicy="StretchToParent"
              HeightSizePolicy="StretchToParent"
              IsVisible="@IsHeroesSelected">
              <Children>
                <ListPanel Id="HeroesLayoutPanel" WidthSizePolicy="StretchToParent"
                  HeightSizePolicy="StretchToParent"
                  StackLayout.LayoutMethod="HorizontalLeftToRight">
                  <Children>

                    <!-- LEFT: Hero List -->
                    <Widget Id="HeroListPanel" WidthSizePolicy="StretchToParent"
                      HeightSizePolicy="StretchToParent"
                      SuggestedWidth="1100" Sprite="BlankWhiteSquare_9" Color="#2a2a2aFF"
                      MarginRight="10">
                      <Children>
                        <Widget Id="HeroListTopBorder" WidthSizePolicy="StretchToParent"
                          HeightSizePolicy="Fixed" SuggestedHeight="2"
                          VerticalAlignment="Top" Sprite="BlankWhiteSquare_9" Color="#8B7355FF" />
                        <Widget Id="HeroListBottomBorder" WidthSizePolicy="StretchToParent"
                          HeightSizePolicy="Fixed" SuggestedHeight="2"
                          VerticalAlignment="Bottom" Sprite="BlankWhiteSquare_9" Color="#8B7355FF" />
                        <Widget Id="HeroListLeftBorder" WidthSizePolicy="Fixed"
                          HeightSizePolicy="StretchToParent" SuggestedWidth="2"
                          HorizontalAlignment="Left" Sprite="BlankWhiteSquare_9" Color="#8B7355FF" />
                        <Widget Id="HeroListRightBorder" WidthSizePolicy="Fixed"
                          HeightSizePolicy="StretchToParent" SuggestedWidth="2"
                          HorizontalAlignment="Right" Sprite="BlankWhiteSquare_9" Color="#8B7355FF" />

                        <Widget Id="HeroListContent" WidthSizePolicy="StretchToParent"
                          HeightSizePolicy="StretchToParent"
                          MarginTop="10" MarginBottom="10" MarginLeft="10" MarginRight="10">
                          <Children>
                            <!-- Headers -->
                            <Widget Id="HeroListHeaderRow" WidthSizePolicy="StretchToParent"
                              HeightSizePolicy="Fixed" SuggestedHeight="40"
                              VerticalAlignment="Top" Sprite="BlankWhiteSquare_9" Color="#3a3a3aFF">
                              <Children>
                                <ListPanel Id="HeroListHeaderPanel"
                                  WidthSizePolicy="StretchToParent"
                                  HeightSizePolicy="StretchToParent"
                                  LayoutImp.LayoutMethod="HorizontalLeftToRight">
                                  <Children>
                                    <ButtonWidget Id="NameSortButton"
                                      DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed"
                                      HeightSizePolicy="StretchToParent" SuggestedWidth="200"
                                      MarginLeft="10"
                                      Command.Click="ExecuteSortByName">
                                      <Children>
                                        <TextWidget WidthSizePolicy="StretchToParent"
                                          HeightSizePolicy="StretchToParent"
                                          Brush="TownManagement.Description.Title.Text"
                                          Brush.FontSize="20"
                                          Text="@NameSortIndicatorText" HorizontalAlignment="Left"
                                          VerticalAlignment="Center" />
                                      </Children>
                                    </ButtonWidget>
                                    <ButtonWidget Id="GenderSortButton"
                                      DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed"
                                      HeightSizePolicy="StretchToParent" SuggestedWidth="80"
                                      MarginLeft="10"
                                      Command.Click="ExecuteSortByGender">
                                      <Children>
                                        <TextWidget WidthSizePolicy="StretchToParent"
                                          HeightSizePolicy="StretchToParent"
                                          Brush="TownManagement.Description.Title.Text"
                                          Brush.FontSize="20"
                                          Text="@GenderSortIndicatorText" HorizontalAlignment="Left"
                                          VerticalAlignment="Center" />
                                      </Children>
                                    </ButtonWidget>
                                    <ButtonWidget Id="AgeSortButton"
                                      DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed"
                                      HeightSizePolicy="StretchToParent" SuggestedWidth="50"
                                      MarginLeft="10"
                                      Command.Click="ExecuteSortByAge">
                                      <Children>
                                        <TextWidget WidthSizePolicy="StretchToParent"
                                          HeightSizePolicy="StretchToParent"
                                          Brush="TownManagement.Description.Title.Text"
                                          Brush.FontSize="20"
                                          Text="@AgeSortIndicatorText" HorizontalAlignment="Center"
                                          VerticalAlignment="Center" />
                                      </Children>
                                    </ButtonWidget>
                                    <ButtonWidget Id="ClanSortButton"
                                      DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed"
                                      HeightSizePolicy="StretchToParent" SuggestedWidth="150"
                                      MarginLeft="10"
                                      Command.Click="ExecuteSortByClan">
                                      <Children>
                                        <TextWidget WidthSizePolicy="StretchToParent"
                                          HeightSizePolicy="StretchToParent"
                                          Brush="TownManagement.Description.Title.Text"
                                          Brush.FontSize="20"
                                          Text="@ClanSortIndicatorText" HorizontalAlignment="Left"
                                          VerticalAlignment="Center" />
                                      </Children>
                                    </ButtonWidget>
                                    <ButtonWidget Id="KingdomSortButton"
                                      DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed"
                                      HeightSizePolicy="StretchToParent" SuggestedWidth="150"
                                      MarginLeft="10"
                                      Command.Click="ExecuteSortByKingdom">
                                      <Children>
                                        <TextWidget WidthSizePolicy="StretchToParent"
                                          HeightSizePolicy="StretchToParent"
                                          Brush="TownManagement.Description.Title.Text"
                                          Brush.FontSize="20"
                                          Text="@KingdomSortIndicatorText"
                                          HorizontalAlignment="Left" VerticalAlignment="Center" />
                                      </Children>
                                    </ButtonWidget>
                                    <ButtonWidget Id="CultureSortButton"
                                      DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed"
                                      HeightSizePolicy="StretchToParent" SuggestedWidth="120"
                                      MarginLeft="10"
                                      Command.Click="ExecuteSortByCulture">
                                      <Children>
                                        <TextWidget WidthSizePolicy="StretchToParent"
                                          HeightSizePolicy="StretchToParent"
                                          Brush="TownManagement.Description.Title.Text"
                                          Brush.FontSize="20"
                                          Text="@CultureSortIndicatorText"
                                          HorizontalAlignment="Left" VerticalAlignment="Center" />
                                      </Children>
                                    </ButtonWidget>
                                    <ButtonWidget Id="TypeSortButton"
                                      DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed"
                                      HeightSizePolicy="StretchToParent" SuggestedWidth="80"
                                      MarginLeft="10"
                                      Command.Click="ExecuteSortByType">
                                      <Children>
                                        <TextWidget WidthSizePolicy="StretchToParent"
                                          HeightSizePolicy="StretchToParent"
                                          Brush="TownManagement.Description.Title.Text"
                                          Brush.FontSize="20"
                                          Text="@TypeSortIndicatorText" HorizontalAlignment="Left"
                                          VerticalAlignment="Center" />
                                      </Children>
                                    </ButtonWidget>
                                    <ButtonWidget Id="LevelSortButton"
                                      DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed"
                                      HeightSizePolicy="StretchToParent" SuggestedWidth="50"
                                      MarginLeft="10"
                                      Command.Click="ExecuteSortByLevel">
                                      <Children>
                                        <TextWidget WidthSizePolicy="StretchToParent"
                                          HeightSizePolicy="StretchToParent"
                                          Brush="TownManagement.Description.Title.Text"
                                          Brush.FontSize="20"
                                          Text="@LevelSortIndicatorText"
                                          HorizontalAlignment="Center" VerticalAlignment="Center" />
                                      </Children>
                                    </ButtonWidget>
                                  </Children>
                                </ListPanel>
                                <Widget Id="HeaderDividerLine" WidthSizePolicy="StretchToParent"
                                  HeightSizePolicy="Fixed" SuggestedHeight="2"
                                  VerticalAlignment="Bottom" Sprite="BlankWhiteSquare_9"
                                  Color="#8B7355FF" />
                              </Children>
                            </Widget>

                            <!-- Scrollable List -->
                            <Widget Id="HeroListScrollContainer" WidthSizePolicy="StretchToParent"
                              HeightSizePolicy="StretchToParent" MarginTop="42">
                              <Children>
                                <ScrollablePanel Id="HeroesScrollablePanel"
                                  WidthSizePolicy="StretchToParent"
                                  HeightSizePolicy="StretchToParent" MarginRight="25"
                                  AutoHideScrollBars="true"
                                  ClipRect="HeroesClipRect"
                                  InnerPanel="HeroesClipRect\HeroesInnerPanel"
                                  VerticalScrollbar="..\ScrollbarContainer\HeroesScrollbar">
                                  <Children>
                                    <Widget Id="HeroesClipRect" WidthSizePolicy="StretchToParent"
                                      HeightSizePolicy="StretchToParent" ClipContents="true">
                                      <Children>
                                        <ListPanel Id="HeroesInnerPanel"
                                          WidthSizePolicy="StretchToParent"
                                          HeightSizePolicy="CoverChildren" DataSource="{Heroes}"
                                          StackLayout.LayoutMethod="VerticalBottomToTop">
                                          <ItemTemplate>
                                            <ButtonWidget DoNotPassEventsToChildren="true"
                                              UpdateChildrenStates="true"
                                              WidthSizePolicy="StretchToParent"
                                              HeightSizePolicy="Fixed"
                                              SuggestedHeight="35" MarginBottom="2"
                                              Brush="Commander.HeroRow"
                                              Command.Click="ExecuteSelect" IsSelected="@IsSelected"
                                              IsHidden="@IsFiltered">
                                              <Children>
                                                <ListPanel Id="HeroRowPanel"
                                                  WidthSizePolicy="StretchToParent"
                                                  HeightSizePolicy="StretchToParent"
                                                  StackLayout.LayoutMethod="HorizontalLeftToRight">
                                                  <Children>
                                                    <Widget Id="NameCell" WidthSizePolicy="Fixed"
                                                      HeightSizePolicy="StretchToParent"
                                                      SuggestedWidth="200" MarginLeft="10">
                                                      <Children>
                                                        <TextWidget
                                                          WidthSizePolicy="StretchToParent"
                                                          HeightSizePolicy="StretchToParent"
                                                          Brush="Clan.TabControl.Text"
                                                          Brush.FontSize="18" Text="@Name"
                                                          HorizontalAlignment="Left"
                                                          VerticalAlignment="Center" />
                                                      </Children>
                                                    </Widget>
                                                    <Widget Id="GenderCell" WidthSizePolicy="Fixed"
                                                      HeightSizePolicy="StretchToParent"
                                                      SuggestedWidth="80" MarginLeft="10">
                                                      <Children>
                                                        <TextWidget
                                                          WidthSizePolicy="StretchToParent"
                                                          HeightSizePolicy="StretchToParent"
                                                          Brush="Clan.TabControl.Text"
                                                          Brush.FontSize="18" Text="@Gender"
                                                          HorizontalAlignment="Left"
                                                          VerticalAlignment="Center" />
                                                      </Children>
                                                    </Widget>
                                                    <Widget Id="AgeCell" WidthSizePolicy="Fixed"
                                                      HeightSizePolicy="StretchToParent"
                                                      SuggestedWidth="50" MarginLeft="10">
                                                      <Children>
                                                        <TextWidget
                                                          WidthSizePolicy="StretchToParent"
                                                          HeightSizePolicy="StretchToParent"
                                                          Brush="Clan.TabControl.Text"
                                                          Brush.FontSize="18" Text="@AgeText"
                                                          HorizontalAlignment="Center"
                                                          VerticalAlignment="Center" />
                                                      </Children>
                                                    </Widget>
                                                    <Widget Id="ClanCell" WidthSizePolicy="Fixed"
                                                      HeightSizePolicy="StretchToParent"
                                                      SuggestedWidth="150" MarginLeft="10">
                                                      <Children>
                                                        <TextWidget
                                                          WidthSizePolicy="StretchToParent"
                                                          HeightSizePolicy="StretchToParent"
                                                          Brush="Clan.TabControl.Text"
                                                          Brush.FontSize="18" Text="@Clan"
                                                          HorizontalAlignment="Left"
                                                          VerticalAlignment="Center" />
                                                      </Children>
                                                    </Widget>
                                                    <Widget Id="KingdomCell" WidthSizePolicy="Fixed"
                                                      HeightSizePolicy="StretchToParent"
                                                      SuggestedWidth="150" MarginLeft="10">
                                                      <Children>
                                                        <TextWidget
                                                          WidthSizePolicy="StretchToParent"
                                                          HeightSizePolicy="StretchToParent"
                                                          Brush="Clan.TabControl.Text"
                                                          Brush.FontSize="18" Text="@Kingdom"
                                                          HorizontalAlignment="Left"
                                                          VerticalAlignment="Center" />
                                                      </Children>
                                                    </Widget>
                                                    <Widget Id="CultureCell" WidthSizePolicy="Fixed"
                                                      HeightSizePolicy="StretchToParent"
                                                      SuggestedWidth="120" MarginLeft="10">
                                                      <Children>
                                                        <TextWidget
                                                          WidthSizePolicy="StretchToParent"
                                                          HeightSizePolicy="StretchToParent"
                                                          Brush="Clan.TabControl.Text"
                                                          Brush.FontSize="18" Text="@Culture"
                                                          HorizontalAlignment="Left"
                                                          VerticalAlignment="Center" />
                                                      </Children>
                                                    </Widget>
                                                    <Widget Id="TypeCell" WidthSizePolicy="Fixed"
                                                      HeightSizePolicy="StretchToParent"
                                                      SuggestedWidth="80" MarginLeft="10">
                                                      <Children>
                                                        <TextWidget
                                                          WidthSizePolicy="StretchToParent"
                                                          HeightSizePolicy="StretchToParent"
                                                          Brush="Clan.TabControl.Text"
                                                          Brush.FontSize="18" Text="@HeroType"
                                                          HorizontalAlignment="Left"
                                                          VerticalAlignment="Center" />
                                                      </Children>
                                                    </Widget>
                                                    <Widget Id="LevelCell" WidthSizePolicy="Fixed"
                                                      HeightSizePolicy="StretchToParent"
                                                      SuggestedWidth="50" MarginLeft="10">
                                                      <Children>
                                                        <TextWidget
                                                          WidthSizePolicy="StretchToParent"
                                                          HeightSizePolicy="StretchToParent"
                                                          Brush="Clan.TabControl.Text"
                                                          Brush.FontSize="18" Text="@LevelText"
                                                          HorizontalAlignment="Center"
                                                          VerticalAlignment="Center" />
                                                      </Children>
                                                    </Widget>
                                                  </Children>
                                                </ListPanel>
                                              </Children>
                                            </ButtonWidget>
                                          </ItemTemplate>
                                        </ListPanel>
                                      </Children>
                                    </Widget>
                                  </Children>
                                </ScrollablePanel>
                                <Widget Id="ScrollbarContainer" WidthSizePolicy="Fixed"
                                  HeightSizePolicy="StretchToParent"
                                  SuggestedWidth="25" HorizontalAlignment="Right">
                                  <Children>
                                    <ScrollbarWidget Id="HeroesScrollbar" WidthSizePolicy="Fixed"
                                      HeightSizePolicy="StretchToParent"
                                      SuggestedWidth="20" MinValue="0" MaxValue="100"
                                      AlignmentAxis="Vertical"
                                      HorizontalAlignment="Center" VerticalAlignment="Top"
                                      Handle="ScrollbarHandle">
                                      <Children>
                                        <Widget Id="ScrollbarHandle" WidthSizePolicy="Fixed"
                                          HeightSizePolicy="Fixed"
                                          SuggestedWidth="20" MinHeight="30"
                                          HorizontalAlignment="Center"
                                          VerticalAlignment="Top" Sprite="BlankWhiteSquare_9"
                                          Color="#8B7355FF" />
                                      </Children>
                                    </ScrollbarWidget>
                                  </Children>
                                </Widget>
                              </Children>
                            </Widget>
                          </Children>
                        </Widget>
                      </Children>
                    </Widget>

                    <!-- RIGHT: Hero Editor - 3 Column Compact Layout -->
                    <Widget Id="HeroEditorContainer" DataSource="{HeroEditor}"
                      WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent"
                      SuggestedWidth="900" IsVisible="@IsVisible" Sprite="BlankWhiteSquare_9"
                      Color="#2a2a2aFF">
                      <Children>
                        <Widget Id="EditorTopBorder" WidthSizePolicy="StretchToParent"
                          HeightSizePolicy="Fixed" SuggestedHeight="2"
                          VerticalAlignment="Top" Sprite="BlankWhiteSquare_9" Color="#8B7355FF" />
                        <Widget Id="EditorBottomBorder" WidthSizePolicy="StretchToParent"
                          HeightSizePolicy="Fixed" SuggestedHeight="2"
                          VerticalAlignment="Bottom" Sprite="BlankWhiteSquare_9" Color="#8B7355FF" />
                        <Widget Id="EditorLeftBorder" WidthSizePolicy="Fixed"
                          HeightSizePolicy="StretchToParent" SuggestedWidth="2"
                          HorizontalAlignment="Left" Sprite="BlankWhiteSquare_9" Color="#8B7355FF" />
                        <Widget Id="EditorRightBorder" WidthSizePolicy="Fixed"
                          HeightSizePolicy="StretchToParent" SuggestedWidth="2"
                          HorizontalAlignment="Right" Sprite="BlankWhiteSquare_9" Color="#8B7355FF" />

                        <!-- 3-Column Layout -->
                        <ListPanel Id="EditorColumnsPanel" WidthSizePolicy="StretchToParent"
                          HeightSizePolicy="StretchToParent"
                          MarginTop="8" MarginBottom="8" MarginLeft="8" MarginRight="8"
                          StackLayout.LayoutMethod="HorizontalLeftToRight">
                          <Children>

                            <!-- LEFT COLUMN: Portrait + Info + Equipment -->
                            <HeroInfoColumn />

                            <!-- CENTER COLUMN: Clan Banner + Character Model with Gear Slots +
                            Loadout -->
                            <HeroCharacterColumn />

                            <!-- RIGHT COLUMN: Skills Grid -->
                            <HeroSkillsColumn />

                          </Children>
                        </ListPanel>
                      </Children>
                    </Widget>

                  </Children>
                </ListPanel>
              </Children>
            </Widget>

          </Children>
        </Widget>

        <!-- Footer Bar -->
        <Widget Id="FooterBar" WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed"
          SuggestedHeight="50"
          VerticalAlignment="Bottom" Sprite="BlankWhiteSquare_9" Color="#2a2a2aFF">
          <Children>
            <Widget Id="FooterTopBorder" WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed"
              SuggestedHeight="2"
              VerticalAlignment="Top" Sprite="BlankWhiteSquare_9" Color="#8B7355FF" />
            <Widget Id="LoadingStatusContainer" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
              SuggestedWidth="200" SuggestedHeight="36"
              HorizontalAlignment="Left" VerticalAlignment="Center" MarginLeft="25"
              Sprite="BlankWhiteSquare_9" Color="#252525DD">
              <Children>
                <TextWidget Id="LoadingStatusText" WidthSizePolicy="StretchToParent"
                  HeightSizePolicy="StretchToParent"
                  Brush="TownManagement.Description.Title.Text" Brush.FontSize="16"
                  Text="@LoadingStatusText" HorizontalAlignment="Center" VerticalAlignment="Center" />
              </Children>
            </Widget>
            <ButtonWidget Id="CloseButton" DoNotPassEventsToChildren="true"
              UpdateChildrenStates="true"
              WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="120"
              SuggestedHeight="36"
              HorizontalAlignment="Center" VerticalAlignment="Center" Command.Click="ExecuteClose">
              <Children>
                <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent"
                  HorizontalAlignment="Center" VerticalAlignment="Center"
                  Brush="Clan.TabControl.Text" Text="Close" />
              </Children>
            </ButtonWidget>
          </Children>
        </Widget>

      </Children>
    </Widget>
  </Window>
</Prefab>