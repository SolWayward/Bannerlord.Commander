<Prefab>
  <Window>
    <!-- Full screen dark background container -->
    <Widget WidthSizePolicy="StretchToParent" 
            HeightSizePolicy="StretchToParent"
            Sprite="BlankWhiteSquare_9"
            Color="#1a1a1aEE">
      <Children>
        
        <!-- Header Bar -->
        <Widget WidthSizePolicy="StretchToParent"
                HeightSizePolicy="Fixed"
                SuggestedHeight="60"
                VerticalAlignment="Top"
                Sprite="BlankWhiteSquare_9"
                Color="#2a2a2aFF">
          <Children>
            
            <!-- Decorative top border line -->
            <Widget WidthSizePolicy="StretchToParent"
                    HeightSizePolicy="Fixed"
                    SuggestedHeight="2"
                    VerticalAlignment="Top"
                    Sprite="BlankWhiteSquare_9"
                    Color="#8B7355FF" />
            
            <!-- Title Text - Centered -->
            <RichTextWidget WidthSizePolicy="StretchToParent"
                            HeightSizePolicy="StretchToParent"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Brush="TownManagement.Description.Title.Text"
                            Brush.FontSize="28"
                            Brush.TextHorizontalAlignment="Center"
                            Text="@TitleText" />
            
            <!-- Decorative bottom border line -->
            <Widget WidthSizePolicy="StretchToParent"
                    HeightSizePolicy="Fixed"
                    SuggestedHeight="2"
                    VerticalAlignment="Bottom"
                    Sprite="BlankWhiteSquare_9"
                    Color="#8B7355FF" />
                    
          </Children>
        </Widget>
        
        <!-- Mode Toggle Tabs Row (below header) -->
        <Widget WidthSizePolicy="StretchToParent"
                HeightSizePolicy="Fixed"
                SuggestedHeight="42"
                MarginTop="60"
                Sprite="BlankWhiteSquare_9"
                Color="#1E1E1EFF">
          <Children>
            
            <!-- Horizontal container for mode tabs -->
            <ListPanel WidthSizePolicy="CoverChildren"
                       HeightSizePolicy="StretchToParent"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Bottom"
                       LayoutImp.LayoutMethod="HorizontalLeftToRight">
              <Children>
                
                <!-- Kingdoms Tab -->
                <ButtonWidget DoNotPassEventsToChildren="true"
                              UpdateChildrenStates="true"
                              WidthSizePolicy="Fixed"
                              HeightSizePolicy="Fixed"
                              SuggestedWidth="180"
                              SuggestedHeight="38"
                              MarginLeft="2"
                              MarginRight="2"
                              Brush="Commander.Tab.Button"
                              Command.Click="ExecuteSelectKingdoms">
                  <Children>
                    <!-- Top border - only visible when selected -->
                    <Widget WidthSizePolicy="StretchToParent"
                            HeightSizePolicy="Fixed"
                            SuggestedHeight="3"
                            VerticalAlignment="Top"
                            Sprite="BlankWhiteSquare_9"
                            Color="#C9A86CFF"
                            IsVisible="@IsKingdomsSelected"/>
                    <TextWidget WidthSizePolicy="StretchToParent"
                                HeightSizePolicy="StretchToParent"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Brush="Clan.TabControl.Text"
                                Text="Kingdoms" />
                  </Children>
                </ButtonWidget>
                
                <!-- Clans Tab -->
                <ButtonWidget DoNotPassEventsToChildren="true"
                              UpdateChildrenStates="true"
                              WidthSizePolicy="Fixed"
                              HeightSizePolicy="Fixed"
                              SuggestedWidth="180"
                              SuggestedHeight="38"
                              MarginLeft="2"
                              MarginRight="2"
                              Brush="Commander.Tab.Button"
                              Command.Click="ExecuteSelectClans">
                  <Children>
                    <!-- Top border - only visible when selected -->
                    <Widget WidthSizePolicy="StretchToParent"
                            HeightSizePolicy="Fixed"
                            SuggestedHeight="3"
                            VerticalAlignment="Top"
                            Sprite="BlankWhiteSquare_9"
                            Color="#C9A86CFF"
                            IsVisible="@IsClansSelected"/>
                    <TextWidget WidthSizePolicy="StretchToParent"
                                HeightSizePolicy="StretchToParent"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Brush="Clan.TabControl.Text"
                                Text="Clans" />
                  </Children>
                </ButtonWidget>
                
                <!-- Heroes Tab -->
                <ButtonWidget DoNotPassEventsToChildren="true"
                              UpdateChildrenStates="true"
                              WidthSizePolicy="Fixed"
                              HeightSizePolicy="Fixed"
                              SuggestedWidth="180"
                              SuggestedHeight="38"
                              MarginLeft="2"
                              MarginRight="2"
                              Brush="Commander.Tab.Button"
                              Command.Click="ExecuteSelectHeroes">
                  <Children>
                    <!-- Top border - only visible when selected -->
                    <Widget WidthSizePolicy="StretchToParent"
                            HeightSizePolicy="Fixed"
                            SuggestedHeight="3"
                            VerticalAlignment="Top"
                            Sprite="BlankWhiteSquare_9"
                            Color="#C9A86CFF"
                            IsVisible="@IsHeroesSelected"/>
                    <TextWidget WidthSizePolicy="StretchToParent"
                                HeightSizePolicy="StretchToParent"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Brush="Clan.TabControl.Text"
                                Text="Heroes" />
                  </Children>
                </ButtonWidget>
                
                <!-- Settlements Tab -->
                <ButtonWidget DoNotPassEventsToChildren="true"
                              UpdateChildrenStates="true"
                              WidthSizePolicy="Fixed"
                              HeightSizePolicy="Fixed"
                              SuggestedWidth="180"
                              SuggestedHeight="38"
                              MarginLeft="2"
                              MarginRight="2"
                              Brush="Commander.Tab.Button"
                              Command.Click="ExecuteSelectSettlements">
                  <Children>
                    <!-- Top border - only visible when selected -->
                    <Widget WidthSizePolicy="StretchToParent"
                            HeightSizePolicy="Fixed"
                            SuggestedHeight="3"
                            VerticalAlignment="Top"
                            Sprite="BlankWhiteSquare_9"
                            Color="#C9A86CFF"
                            IsVisible="@IsSettlementsSelected"/>
                    <TextWidget WidthSizePolicy="StretchToParent"
                                HeightSizePolicy="StretchToParent"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Brush="Clan.TabControl.Text"
                                Text="Settlements" />
                  </Children>
                </ButtonWidget>
                
                <!-- Troops Tab -->
                <ButtonWidget DoNotPassEventsToChildren="true"
                              UpdateChildrenStates="true"
                              WidthSizePolicy="Fixed"
                              HeightSizePolicy="Fixed"
                              SuggestedWidth="180"
                              SuggestedHeight="38"
                              MarginLeft="2"
                              MarginRight="2"
                              Brush="Commander.Tab.Button"
                              Command.Click="ExecuteSelectTroops">
                  <Children>
                    <!-- Top border - only visible when selected -->
                    <Widget WidthSizePolicy="StretchToParent"
                            HeightSizePolicy="Fixed"
                            SuggestedHeight="3"
                            VerticalAlignment="Top"
                            Sprite="BlankWhiteSquare_9"
                            Color="#C9A86CFF"
                            IsVisible="@IsTroopsSelected"/>
                    <TextWidget WidthSizePolicy="StretchToParent"
                                HeightSizePolicy="StretchToParent"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Brush="Clan.TabControl.Text"
                                Text="Troops" />
                  </Children>
                </ButtonWidget>
                
                <!-- Items Tab -->
                <ButtonWidget DoNotPassEventsToChildren="true"
                              UpdateChildrenStates="true"
                              WidthSizePolicy="Fixed"
                              HeightSizePolicy="Fixed"
                              SuggestedWidth="180"
                              SuggestedHeight="38"
                              MarginLeft="2"
                              MarginRight="2"
                              Brush="Commander.Tab.Button"
                              Command.Click="ExecuteSelectItems">
                  <Children>
                    <!-- Top border - only visible when selected -->
                    <Widget WidthSizePolicy="StretchToParent"
                            HeightSizePolicy="Fixed"
                            SuggestedHeight="3"
                            VerticalAlignment="Top"
                            Sprite="BlankWhiteSquare_9"
                            Color="#C9A86CFF"
                            IsVisible="@IsItemsSelected"/>
                    <TextWidget WidthSizePolicy="StretchToParent"
                                HeightSizePolicy="StretchToParent"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Brush="Clan.TabControl.Text"
                                Text="Items" />
                  </Children>
                </ButtonWidget>
                
                <!-- Characters Tab -->
                <ButtonWidget DoNotPassEventsToChildren="true"
                              UpdateChildrenStates="true"
                              WidthSizePolicy="Fixed"
                              HeightSizePolicy="Fixed"
                              SuggestedWidth="180"
                              SuggestedHeight="38"
                              MarginLeft="2"
                              MarginRight="2"
                              Brush="Commander.Tab.Button"
                              Command.Click="ExecuteSelectCharacters">
                  <Children>
                    <!-- Top border - only visible when selected -->
                    <Widget WidthSizePolicy="StretchToParent"
                            HeightSizePolicy="Fixed"
                            SuggestedHeight="3"
                            VerticalAlignment="Top"
                            Sprite="BlankWhiteSquare_9"
                            Color="#C9A86CFF"
                            IsVisible="@IsCharactersSelected"/>
                    <TextWidget WidthSizePolicy="StretchToParent"
                                HeightSizePolicy="StretchToParent"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Brush="Clan.TabControl.Text"
                                Text="Characters" />
                  </Children>
                </ButtonWidget>
                
              </Children>
            </ListPanel>
            
            <!-- Bottom border line that connects to content area -->
            <Widget WidthSizePolicy="StretchToParent"
                    HeightSizePolicy="Fixed"
                    SuggestedHeight="2"
                    VerticalAlignment="Bottom"
                    Sprite="BlankWhiteSquare_9"
                    Color="#3D3D3DFF" />
            
          </Children>
        </Widget>
        
        <!-- Main Content Area (below mode tabs) -->
        <Widget WidthSizePolicy="StretchToParent"
                HeightSizePolicy="StretchToParent"
                MarginTop="104"
                MarginBottom="60"
                MarginLeft="20"
                MarginRight="20">
          <Children>
            <!-- Content will be populated based on selected mode -->
          </Children>
        </Widget>
        
        <!-- Footer Bar -->
        <Widget WidthSizePolicy="StretchToParent"
                HeightSizePolicy="Fixed"
                SuggestedHeight="50"
                VerticalAlignment="Bottom"
                Sprite="BlankWhiteSquare_9"
                Color="#2a2a2aFF">
          <Children>
            
            <!-- Decorative top border line -->
            <Widget WidthSizePolicy="StretchToParent"
                    HeightSizePolicy="Fixed"
                    SuggestedHeight="2"
                    VerticalAlignment="Top"
                    Sprite="BlankWhiteSquare_9"
                    Color="#8B7355FF" />
            
            <!-- Close button -->
            <ButtonWidget WidthSizePolicy="Fixed"
                          HeightSizePolicy="Fixed"
                          SuggestedWidth="120"
                          SuggestedHeight="36"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Center"
                          DoNotPassEventsToChildren="true"
                          UpdateChildrenStates="true"
                          Brush="Commander.Tab.Button"
                          Command.Click="ExecuteClose">
              <Children>
                <TextWidget WidthSizePolicy="StretchToParent"
                            HeightSizePolicy="StretchToParent"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Brush="Clan.TabControl.Text"
                            Text="Close" />
              </Children>
            </ButtonWidget>
            
          </Children>
        </Widget>
        
      </Children>
    </Widget>
  </Window>
</Prefab>
